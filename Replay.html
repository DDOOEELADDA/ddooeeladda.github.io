<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>리플레이 제출 - 호그 주먹전</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="bg">

<header class="nav">
  <div class="nav-inner">
    <a href="index.html" class="logo">Hog Boxing</a>
    <nav class="menu">
      <a href="index.html">홈</a>
      <a href="ranking.html">랭킹</a>
      <a href="board.html">게시판</a>
    </nav>
  </div>
</header>

<div class="page-container">
  <h1 class="page-title">리플레이 코드 제출</h1>

  <p>
    경기 후 발급된 <strong>오버워치2 리플레이 코드</strong>를 입력하세요.
  </p>

  <input
    id="replayInput"
    placeholder="예: ABCD123"
    style="padding:10px; width:250px;"
  />

  <br><br>

  <button id="submitReplayBtn" class="btn-outline">
    제출하기
  </button>

  <div id="resultMsg" style="margin-top:20px;"></div>
</div>

<script>
document.getElementById("submitReplayBtn").onclick = async () => {
  const code = document.getElementById("replayInput").value.trim();
  if (!code) {
    alert("리플레이 코드를 입력하세요.");
    return;
  }

  try {
    const res = await fetch("/submit-replay", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ replayCode: code })
    });

    const data = await res.json();

    document.getElementById("resultMsg").innerHTML =
      `<p>${data.message}</p>`;

  } catch (e) {
    alert("서버 오류");
    console.error(e);
  }
};
</script>

</body>
</html>
